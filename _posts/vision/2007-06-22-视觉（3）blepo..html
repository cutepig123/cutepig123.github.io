<p>把matlab转成c程序有好办法了，从网上下载了一个函数库blepo,转换为c几乎是一行对一行，openCv经常涉及到的内存申请和释放这里都不用管。高兴！<br>看看这段程序比较一下差别<br>matlab的<br></p>
<div style="BORDER-RIGHT: #cccccc 1px solid; PADDING-RIGHT: 5px; BORDER-TOP: #cccccc 1px solid; PADDING-LEFT: 4px; FONT-SIZE: 13px; PADDING-BOTTOM: 4px; BORDER-LEFT: #cccccc 1px solid; WIDTH: 98%; WORD-BREAK: break-all; PADDING-TOP: 4px; BORDER-BOTTOM: #cccccc 1px solid; BACKGROUND-COLOR: #eeeeee"><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><span style="COLOR: #000000">function&nbsp;[A,R,t]</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">art(P,fsign)<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">ART&nbsp;&nbsp;Factorize&nbsp;camera&nbsp;matrix&nbsp;into&nbsp;intrinsic&nbsp;and&nbsp;extrinsic&nbsp;matrices<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;[A,R,t]&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;art(P,fsign)&nbsp;&nbsp;factorize&nbsp;the&nbsp;projection&nbsp;matrix&nbsp;P&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #0000ff">as</span><span style="COLOR: #000000">&nbsp;P</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">A</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">[R;t]&nbsp;and&nbsp;enforce&nbsp;the&nbsp;sign&nbsp;of&nbsp;the&nbsp;focal&nbsp;lenght&nbsp;to&nbsp;be&nbsp;fsign.<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;By&nbsp;defaukt&nbsp;fsign</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">.<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;Author:&nbsp;A.&nbsp;Fusiello,&nbsp;</span><span style="COLOR: #000000">1999</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;fsign&nbsp;tells&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;image&nbsp;plane&nbsp;wrt&nbsp;the&nbsp;focal&nbsp;plane.&nbsp;If&nbsp;it&nbsp;</span><span style="COLOR: #0000ff">is</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;negative&nbsp;the&nbsp;image&nbsp;plane&nbsp;</span><span style="COLOR: #0000ff">is</span><span style="COLOR: #000000">&nbsp;behind&nbsp;the&nbsp;focal&nbsp;plane.<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;by&nbsp;</span><span style="COLOR: #0000ff">default</span><span style="COLOR: #000000">&nbsp;assume&nbsp;POSITIVE&nbsp;focal&nbsp;lenght<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;nargin&nbsp;</span><span style="COLOR: #000000">==</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;fsign&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>end<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>s&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;P(</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">:</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">4</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>Q&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;inv(P(</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">:</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,&nbsp;</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">:</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">));<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>[U,B]&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;qr(Q);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;fix&nbsp;the&nbsp;sign&nbsp;of&nbsp;B(</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">).&nbsp;This&nbsp;can&nbsp;possibly&nbsp;change&nbsp;the&nbsp;sign&nbsp;of&nbsp;the&nbsp;resulting&nbsp;matrix,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;which&nbsp;</span><span style="COLOR: #0000ff">is</span><span style="COLOR: #000000">&nbsp;defined&nbsp;up&nbsp;to&nbsp;a&nbsp;scale&nbsp;factor,&nbsp;however.<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>sig&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;sign(B(</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">));<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>B</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">B</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">sig;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>s</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">s</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">sig;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;the&nbsp;sign&nbsp;of&nbsp;the&nbsp;focal&nbsp;lenght&nbsp;</span><span style="COLOR: #0000ff">is</span><span style="COLOR: #000000">&nbsp;not&nbsp;the&nbsp;required&nbsp;one,&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;change&nbsp;it,&nbsp;and&nbsp;change&nbsp;the&nbsp;rotation&nbsp;accordingly.<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;fsign</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B(</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">)&nbsp;</span><span style="COLOR: #000000">&lt;</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;[</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">];<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;E</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;U</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">E;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;end<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;</span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;fsign</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B(</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">)&nbsp;</span><span style="COLOR: #000000">&lt;</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;[</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">];<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;E</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;U</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">E;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;end<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;U&nbsp;</span><span style="COLOR: #0000ff">is</span><span style="COLOR: #000000">&nbsp;not&nbsp;a&nbsp;rotation,&nbsp;fix&nbsp;the&nbsp;sign.&nbsp;This&nbsp;can&nbsp;possibly&nbsp;change&nbsp;the&nbsp;sign<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;of&nbsp;the&nbsp;resulting&nbsp;matrix,&nbsp;which&nbsp;</span><span style="COLOR: #0000ff">is</span><span style="COLOR: #000000">&nbsp;defined&nbsp;up&nbsp;to&nbsp;a&nbsp;scale&nbsp;factor,&nbsp;however.<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;det(U)</span><span style="COLOR: #000000">&lt;</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">U;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;s</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">&nbsp;s;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>end<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;sanity&nbsp;check&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;(norm(Q</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">U</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B)</span><span style="COLOR: #000000">&gt;</span><span style="COLOR: #000000">1e</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">10</span><span style="COLOR: #000000">)&nbsp;</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">&nbsp;(norm(Q</span><span style="COLOR: #000000">+</span><span style="COLOR: #000000">U</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B)</span><span style="COLOR: #000000">&gt;</span><span style="COLOR: #000000">1e</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">10</span><span style="COLOR: #000000">)&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;error(</span><span style="COLOR: #000000">'</span><span style="COLOR: #000000">Something&nbsp;wrong&nbsp;with&nbsp;the&nbsp;QR&nbsp;factorization.</span><span style="COLOR: #000000">'</span><span style="COLOR: #000000">);&nbsp;end<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>R&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;U</span><span style="COLOR: #000000">'</span><span style="COLOR: #000000">;</span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">t&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;B</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">s;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>A&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;inv(B);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>A&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;A&nbsp;.</span><span style="COLOR: #000000">/</span><span style="COLOR: #000000">A(</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;sanity&nbsp;check&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;det(R)&nbsp;</span><span style="COLOR: #000000">&lt;</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;error(</span><span style="COLOR: #000000">'</span><span style="COLOR: #000000">R&nbsp;is&nbsp;not&nbsp;a&nbsp;rotation&nbsp;matrix</span><span style="COLOR: #000000">'</span><span style="COLOR: #000000">);&nbsp;end<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;A(</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">)&nbsp;</span><span style="COLOR: #000000">&lt;</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;error(</span><span style="COLOR: #000000">'</span><span style="COLOR: #000000">Wrong&nbsp;sign&nbsp;of&nbsp;A(3,3)</span><span style="COLOR: #000000">'</span><span style="COLOR: #000000">);&nbsp;end<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #000000">%</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #0000ff">this</span><span style="COLOR: #000000">&nbsp;guarantee&nbsp;that&nbsp;the&nbsp;result&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #0000ff">is</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;a&nbsp;factorization&nbsp;of&nbsp;the&nbsp;given&nbsp;P,&nbsp;up&nbsp;to&nbsp;a&nbsp;scale&nbsp;factor<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>W&nbsp;</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;A</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">[R,t];<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">&nbsp;(rank([P(:),&nbsp;W(:)])&nbsp;</span><span style="COLOR: #000000">~=</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">&nbsp;)<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;error(</span><span style="COLOR: #000000">'</span><span style="COLOR: #000000">Something&nbsp;wrong&nbsp;with&nbsp;the&nbsp;ART&nbsp;factorization.</span><span style="COLOR: #000000">'</span><span style="COLOR: #000000">);&nbsp;end<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span></div>
<p><br>c++的：<br></p>
<div style="BORDER-RIGHT: #cccccc 1px solid; PADDING-RIGHT: 5px; BORDER-TOP: #cccccc 1px solid; PADDING-LEFT: 4px; FONT-SIZE: 13px; PADDING-BOTTOM: 4px; BORDER-LEFT: #cccccc 1px solid; WIDTH: 98%; WORD-BREAK: break-all; PADDING-TOP: 4px; BORDER-BOTTOM: #cccccc 1px solid; BACKGROUND-COLOR: #eeeeee"><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><span style="COLOR: #008000">//</span><span style="COLOR: #008000">P&nbsp;3*4<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">A,R&nbsp;3*3,T&nbsp;3*1</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #0000ff">void</span><span style="COLOR: #000000">&nbsp;art(MatDbl&nbsp;P,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OUT&nbsp;MatDbl&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">A,OUT&nbsp;MatDbl&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">R,OUT&nbsp;MatDbl&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">T,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #0000ff">int</span><span style="COLOR: #000000">&nbsp;fsign</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">)<br><img id=Codehighlighter1_105_1050_Open_Image onclick="this.style.display='none'; Codehighlighter1_105_1050_Open_Text.style.display='none'; Codehighlighter1_105_1050_Closed_Image.style.display='inline'; Codehighlighter1_105_1050_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif" align=top><img id=Codehighlighter1_105_1050_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_105_1050_Closed_Text.style.display='none'; Codehighlighter1_105_1050_Open_Image.style.display='inline'; Codehighlighter1_105_1050_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif" align=top></span><span id=Codehighlighter1_105_1050_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff"><img src="http://www.cnblogs.com/Images/dot.gif"></span><span id=Codehighlighter1_105_1050_Open_Text><span style="COLOR: #000000">{<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;s;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;Q;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;s</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">P.GetSubMat(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;Q</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">Inverse(P.GetSubMat(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">));<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Display(s,"s");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Display(Q,"Q");</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;U,B;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;Qr(Q,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">U,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">B);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF(U,"U");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF(B,"B");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF(U*B-Q,"U*B-Q");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF(U*Transpose(U),"U*U'");</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">(B(</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">)</span><span style="COLOR: #000000">&lt;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">)<br><img id=Codehighlighter1_376_411_Open_Image onclick="this.style.display='none'; Codehighlighter1_376_411_Open_Text.style.display='none'; Codehighlighter1_376_411_Closed_Image.style.display='inline'; Codehighlighter1_376_411_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif" align=top><img id=Codehighlighter1_376_411_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_376_411_Closed_Text.style.display='none'; Codehighlighter1_376_411_Open_Image.style.display='inline'; Codehighlighter1_376_411_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span id=Codehighlighter1_376_411_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff"><img src="http://www.cnblogs.com/Images/dot.gif"></span><span id=Codehighlighter1_376_411_Open_Text><span style="COLOR: #000000">{<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Negate(B,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">B);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Negate(s,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">s);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">(fsign</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">)</span><span style="COLOR: #000000">&lt;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">)<br><img id=Codehighlighter1_435_538_Open_Image onclick="this.style.display='none'; Codehighlighter1_435_538_Open_Text.style.display='none'; Codehighlighter1_435_538_Closed_Image.style.display='inline'; Codehighlighter1_435_538_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif" align=top><img id=Codehighlighter1_435_538_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_435_538_Closed_Text.style.display='none'; Codehighlighter1_435_538_Open_Image.style.display='inline'; Codehighlighter1_435_538_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span id=Codehighlighter1_435_538_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff"><img src="http://www.cnblogs.com/Images/dot.gif"></span><span id=Codehighlighter1_435_538_Open_Text><span style="COLOR: #000000">{<br><img id=Codehighlighter1_451_478_Open_Image onclick="this.style.display='none'; Codehighlighter1_451_478_Open_Text.style.display='none'; Codehighlighter1_451_478_Closed_Image.style.display='inline'; Codehighlighter1_451_478_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif" align=top><img id=Codehighlighter1_451_478_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_451_478_Closed_Text.style.display='none'; Codehighlighter1_451_478_Open_Image.style.display='inline'; Codehighlighter1_451_478_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #0000ff">double</span><span style="COLOR: #000000">&nbsp;E[</span><span style="COLOR: #000000">9</span><span style="COLOR: #000000">]</span><span style="COLOR: #000000">=</span><span id=Codehighlighter1_451_478_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff"><img src="http://www.cnblogs.com/Images/dot.gif"></span><span id=Codehighlighter1_451_478_Open_Text><span style="COLOR: #000000">{</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">}</span></span><span style="COLOR: #000000">;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;_E;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_E.FromArray(E,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">_E</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">U</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">_E;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">(fsign</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B(</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">)</span><span style="COLOR: #000000">&lt;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">)<br><img id=Codehighlighter1_562_665_Open_Image onclick="this.style.display='none'; Codehighlighter1_562_665_Open_Text.style.display='none'; Codehighlighter1_562_665_Closed_Image.style.display='inline'; Codehighlighter1_562_665_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif" align=top><img id=Codehighlighter1_562_665_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_562_665_Closed_Text.style.display='none'; Codehighlighter1_562_665_Open_Image.style.display='inline'; Codehighlighter1_562_665_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span id=Codehighlighter1_562_665_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff"><img src="http://www.cnblogs.com/Images/dot.gif"></span><span id=Codehighlighter1_562_665_Open_Text><span style="COLOR: #000000">{<br><img id=Codehighlighter1_578_605_Open_Image onclick="this.style.display='none'; Codehighlighter1_578_605_Open_Text.style.display='none'; Codehighlighter1_578_605_Closed_Image.style.display='inline'; Codehighlighter1_578_605_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif" align=top><img id=Codehighlighter1_578_605_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_578_605_Closed_Text.style.display='none'; Codehighlighter1_578_605_Open_Image.style.display='inline'; Codehighlighter1_578_605_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #0000ff">double</span><span style="COLOR: #000000">&nbsp;E[</span><span style="COLOR: #000000">9</span><span style="COLOR: #000000">]</span><span style="COLOR: #000000">=</span><span id=Codehighlighter1_578_605_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff"><img src="http://www.cnblogs.com/Images/dot.gif"></span><span id=Codehighlighter1_578_605_Open_Text><span style="COLOR: #000000">{</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">&nbsp;,</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">}</span></span><span style="COLOR: #000000">;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;_E;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_E.FromArray(E,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">_E</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">B;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">U</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">_E;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #0000ff">if</span><span style="COLOR: #000000">(Determinant(U)</span><span style="COLOR: #000000">&lt;</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">)<br><img id=Codehighlighter1_691_726_Open_Image onclick="this.style.display='none'; Codehighlighter1_691_726_Open_Text.style.display='none'; Codehighlighter1_691_726_Closed_Image.style.display='inline'; Codehighlighter1_691_726_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif" align=top><img id=Codehighlighter1_691_726_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_691_726_Closed_Text.style.display='none'; Codehighlighter1_691_726_Open_Image.style.display='inline'; Codehighlighter1_691_726_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span id=Codehighlighter1_691_726_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff"><img src="http://www.cnblogs.com/Images/dot.gif"></span><span id=Codehighlighter1_691_726_Open_Text><span style="COLOR: #000000">{<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Negate(U,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">U);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Negate(s,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">s);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;}</span></span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Norm((Q-U*B))&gt;1e-10&nbsp;&amp;&amp;&nbsp;Norm((Q+U*B).ToVector)&gt;1e-10)<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("'Something&nbsp;wrong&nbsp;with&nbsp;the&nbsp;QR&nbsp;factorization.'\n")&nbsp;&nbsp;&nbsp;&nbsp;;</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">R</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">Transpose(U);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">T</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">B</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">s;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">A</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">Inverse(B);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">A</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">A&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;(</span><span style="COLOR: #000000">1.0</span><span style="COLOR: #000000">&nbsp;</span><span style="COLOR: #000000">/</span><span style="COLOR: #000000">&nbsp;(</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">A)(</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">));<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF(*A,"A");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF(*R,"R");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF(*T,"T");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF((*A)&nbsp;*&nbsp;(*R),"A*R");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF((*A)&nbsp;*&nbsp;(*T),"A*T");</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif" align=top></span><span style="COLOR: #000000">}</span></span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">[T1,T2,Pn1,Pn2]&nbsp;=&nbsp;rectify(Po1,Po2,d1,d2)</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top></span><span style="COLOR: #0000ff">void</span><span style="COLOR: #000000">&nbsp;Rectify(MatDbl&nbsp;Po1,MatDbl&nbsp;Po2,<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/None.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OUT&nbsp;MatDbl&nbsp;</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">T1,OUT&nbsp;MatDbl&nbsp;</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">T2,OUT&nbsp;MatDbl&nbsp;</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">Pn1,OUT&nbsp;MatDbl&nbsp;</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">Pn2<br><img id=Codehighlighter1_1202_1228_Open_Image onclick="this.style.display='none'; Codehighlighter1_1202_1228_Open_Text.style.display='none'; Codehighlighter1_1202_1228_Closed_Image.style.display='inline'; Codehighlighter1_1202_1228_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif" align=top><img id=Codehighlighter1_1202_1228_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_1202_1228_Closed_Text.style.display='none'; Codehighlighter1_1202_1228_Open_Image.style.display='inline'; Codehighlighter1_1202_1228_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span id=Codehighlighter1_1202_1228_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff">/**/</span><span id=Codehighlighter1_1202_1228_Open_Text><span style="COLOR: #008000">/*</span><span style="COLOR: #008000">double&nbsp;d1=0,double&nbsp;d2=0</span><span style="COLOR: #008000">*/</span></span><span style="COLOR: #000000">)<br><img id=Codehighlighter1_1231_2275_Open_Image onclick="this.style.display='none'; Codehighlighter1_1231_2275_Open_Text.style.display='none'; Codehighlighter1_1231_2275_Closed_Image.style.display='inline'; Codehighlighter1_1231_2275_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockStart.gif" align=top><img id=Codehighlighter1_1231_2275_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_1231_2275_Closed_Text.style.display='none'; Codehighlighter1_1231_2275_Open_Image.style.display='inline'; Codehighlighter1_1231_2275_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedBlock.gif" align=top></span><span id=Codehighlighter1_1231_2275_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff"><img src="http://www.cnblogs.com/Images/dot.gif"></span><span id=Codehighlighter1_1231_2275_Open_Text><span style="COLOR: #000000">{<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;A1,R1,t1;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;A2,R2,t2;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;art(Po1,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">A1,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">R1,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">t1);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;art(Po2,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">A2,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">R2,</span><span style="COLOR: #000000">&amp;</span><span style="COLOR: #000000">t2);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;c1,c2;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;c1</span><span style="COLOR: #000000">=-</span><span style="COLOR: #000000">Transpose(R1)</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">Inverse(A1)</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">Po1.GetSubMat(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;c2</span><span style="COLOR: #000000">=-</span><span style="COLOR: #000000">Transpose(R2)</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">Inverse(A2)</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">Po2.GetSubMat(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF(c1,"c1");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintF(c2,"c2");</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;v1,v2,v3;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;v1</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">c2</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">c1;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;v2</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">CrossProduct(Transpose(R1.GetSubMat(</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">)),v1);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;v3</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">CrossProduct(v1,v2);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Display(v1,"v1");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Display(v2,"v2");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Display(v3,"v3");</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;v1</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">(v1&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;(</span><span style="COLOR: #000000">1.0</span><span style="COLOR: #000000">/</span><span style="COLOR: #000000">Norm(v1)));<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;v2</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">(v2&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;(</span><span style="COLOR: #000000">1.0</span><span style="COLOR: #000000">/</span><span style="COLOR: #000000">Norm(v2)));<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;v3</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">(v3&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;(</span><span style="COLOR: #000000">1.0</span><span style="COLOR: #000000">/</span><span style="COLOR: #000000">Norm(v3)));<br><img id=Codehighlighter1_1757_1817_Open_Image onclick="this.style.display='none'; Codehighlighter1_1757_1817_Open_Text.style.display='none'; Codehighlighter1_1757_1817_Closed_Image.style.display='inline'; Codehighlighter1_1757_1817_Closed_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockStart.gif" align=top><img id=Codehighlighter1_1757_1817_Closed_Image style="DISPLAY: none" onclick="this.style.display='none'; Codehighlighter1_1757_1817_Closed_Text.style.display='none'; Codehighlighter1_1757_1817_Open_Image.style.display='inline'; Codehighlighter1_1757_1817_Open_Text.style.display='inline';" src="http://www.cnblogs.com/Images/OutliningIndicators/ContractedSubBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #0000ff">double</span><span style="COLOR: #000000">&nbsp;r[</span><span style="COLOR: #000000">9</span><span style="COLOR: #000000">]</span><span style="COLOR: #000000">=</span><span id=Codehighlighter1_1757_1817_Closed_Text style="BORDER-RIGHT: #808080 1px solid; BORDER-TOP: #808080 1px solid; DISPLAY: none; BORDER-LEFT: #808080 1px solid; BORDER-BOTTOM: #808080 1px solid; BACKGROUND-COLOR: #ffffff"><img src="http://www.cnblogs.com/Images/dot.gif"></span><span id=Codehighlighter1_1757_1817_Open_Text><span style="COLOR: #000000">{v1(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">),v1(</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">),v1(</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">),<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v2(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">),v2(</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">),v2(</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">),<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedSubBlockEnd.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v3(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">),v3(</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">),v3(</span><span style="COLOR: #000000">2</span><span style="COLOR: #000000">)}</span></span><span style="COLOR: #000000">;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;R;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;R.FromArray(r,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">Display(R,"R");</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #000000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;An1</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">A2;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;An1(</span><span style="COLOR: #000000">1</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">)</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;MatDbl&nbsp;An2</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">An1;<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">PrintF(An1,"An1");<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #008000">//</span><span style="COLOR: #008000">&nbsp;&nbsp;&nbsp;&nbsp;Display(An1&nbsp;*(-1.0)&nbsp;*&nbsp;R&nbsp;*&nbsp;c1,"An1&nbsp;*(-1.0)&nbsp;*&nbsp;R&nbsp;*&nbsp;c1");</span><span style="COLOR: #008000"><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top></span><span style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;Pn1</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">An1&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;PackX(R,&nbsp;(</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">1.0</span><span style="COLOR: #000000">)&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;R&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;c1);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;Pn2</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">An2&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;PackX(R,&nbsp;(</span><span style="COLOR: #000000">-</span><span style="COLOR: #000000">1.0</span><span style="COLOR: #000000">)&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;R&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;c2);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;PrintF(Pn1,</span><span style="COLOR: #000000">"</span><span style="COLOR: #000000">Pn1</span><span style="COLOR: #000000">"</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;PrintF(Pn2,</span><span style="COLOR: #000000">"</span><span style="COLOR: #000000">Pn2</span><span style="COLOR: #000000">"</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top><br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;T1</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">Pn1.GetSubMat(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">)&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;Inverse(Po1.GetSubMat(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">));<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;T2</span><span style="COLOR: #000000">=</span><span style="COLOR: #000000">Pn2.GetSubMat(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">)&nbsp;</span><span style="COLOR: #000000">*</span><span style="COLOR: #000000">&nbsp;Inverse(Po2.GetSubMat(</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">0</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">,</span><span style="COLOR: #000000">3</span><span style="COLOR: #000000">));<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;PrintF(T1,</span><span style="COLOR: #000000">"</span><span style="COLOR: #000000">T1</span><span style="COLOR: #000000">"</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/InBlock.gif" align=top>&nbsp;&nbsp;&nbsp;&nbsp;PrintF(T2,</span><span style="COLOR: #000000">"</span><span style="COLOR: #000000">T2</span><span style="COLOR: #000000">"</span><span style="COLOR: #000000">);<br><img src="http://www.cnblogs.com/Images/OutliningIndicators/ExpandedBlockEnd.gif" align=top>}</span></span></div>
