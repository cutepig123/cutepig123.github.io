<p>gl attribute和uniform的用法<br /><br />http://blog.csdn.net/jackers679/article/details/6848085<br /><br /><br />attribute<br />&nbsp;&nbsp; &nbsp;attribute变量是只能在vertex shader中使用的变量。（它不能在fragment shader中声明attribute变量，也不能被fragment shader中使用）<br /><br />&nbsp;&nbsp; &nbsp;一般用attribute变量来表示一些顶点的数据，如：顶点坐标，法线，纹理坐标，顶点颜色等<br />&nbsp;&nbsp; &nbsp;在application中，一般用函数glBindAttribLocation（）来绑定每个attribute变量的位置，然后用函数glVertexAttribPointer（）为每个attribute变量赋值。<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;glsl里面定义属性<br />&nbsp;&nbsp; &nbsp;Line 16:&nbsp;&nbsp;&nbsp;&nbsp; attribute vec3 aVertexPosition;<br />&nbsp;&nbsp; &nbsp;Line 22:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;javascript使用属性<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");<br />&nbsp;&nbsp; &nbsp;Line 97:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);<br />&nbsp;&nbsp; &nbsp;Line 153:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, triangleVertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);<br />&nbsp;&nbsp; &nbsp;Line 160:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, squareVertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);<br />&nbsp;&nbsp; &nbsp;<br />uniform<br />&nbsp;&nbsp; &nbsp;uniform变量就像是C语言里面的常量（const ），它不能被shader程序修改。（shader只能用，不能改）<br />&nbsp;&nbsp; &nbsp;如果uniform变量在vertex和fragment两者之间声明方式完全一样，则它可以在vertex和fragment共享使用。（相当于一个被vertex和fragment shader共享的全局变量）<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;uniform变量一般用来表示：变换矩阵，材质，光照参数和颜色等信息。<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;glsl里<br />&nbsp;&nbsp; &nbsp;Line 18:&nbsp;&nbsp;&nbsp;&nbsp; uniform mat4 uMVMatrix;<br />&nbsp;&nbsp; &nbsp;Line 22:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;javascript里<br />&nbsp;&nbsp; &nbsp;Line 100:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");<br />&nbsp;&nbsp; &nbsp;Line 109:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);<br />&nbsp;&nbsp; &nbsp;<br />3.varying变量<br /><br />varying变量是vertex和fragment shader之间做数据传递用的。一般vertex shader修改varying变量的值，然后fragment shader使用该varying变量的值。因此varying变量在vertex和fragment shader二者之间的声明必须是一致的。application不能使用此变量。&nbsp;&nbsp;&nbsp; </p>