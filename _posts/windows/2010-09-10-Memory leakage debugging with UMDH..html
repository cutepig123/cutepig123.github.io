<div> <!--[endif]-->  <h1><span style="font-size: 10pt; font-family: Wingdings; font-weight: normal;"><span>p<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: 10pt;">The user-mode dump heap (UMDH) utility works with the operating system to analyze Windows heap allocations for a specific process</span></h1>  <h1><span style="font-size: 10pt; font-family: Wingdings; font-weight: normal;"><span>p<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><u><span style="font-size: 10pt;">UMDH is released with NPMS</span></u></h1>  <h1><span style="font-size: 10pt; font-family: Wingdings; font-weight: normal;"><span>p<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span style="font-size: 10pt;">Using UMDH to Find a User-Mode Memory Leak</span></h1>  <h1><span style="font-size: 10pt;">1.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">Preparing to Use UMDH </span></h1>  <h1><span style="font-size: 10pt;">1.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">gflags&nbsp;/i&nbsp;<em>ImageName</em>&nbsp;+ust</span></h1>  <h1><span style="font-size: 10pt;">2.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">Detecting Increases in Heap Allocations with UMDH </span></h1>  <h1><span style="font-size: 10pt;">1.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">Take several snapshots of heap memory </span></h1>  <h1><span style="font-size: 10pt;">1.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">umdh&nbsp;&#8211;p:124&nbsp; &#8211;f:log1.txt&nbsp; </span></h1>  <h1><span style="font-size: 10pt;">2.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">umdh&nbsp;&#8211;p:124&nbsp; &#8211;f:log2.txt&nbsp; </span></h1>  <h1><span style="font-size: 10pt;">3.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">umdh&nbsp;&#8211;p:124&nbsp; &#8211;f:log3.txt&nbsp; </span></h1>  <h1><span style="font-size: 10pt;">2.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">Compare log files recorded at different times to determine which allocations are growing</span></h1>  <h1><span style="font-size: 10pt;">1.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">umdh&nbsp; -v<span>&nbsp;&nbsp; </span>log1.txt&nbsp;&nbsp;log2.txt&nbsp;&gt;&nbsp;logcompare1.txt&nbsp;</span></h1>  <h1><span style="font-size: 10pt;">2.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">umdh&nbsp; -v<span>&nbsp;&nbsp; </span>log1.txt&nbsp;&nbsp;log3.txt&nbsp;&gt;&nbsp;logcompare2.txt</span></h1>  <h1><span style="font-size: 10pt;">3.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">Restore default setting </span></h1>  <h1><span style="font-size: 10pt;">1.<span style="font-family: &quot;Times New Roman&quot;; font-style: normal; font-variant: normal; font-weight: normal; font-size: 7pt; line-height: normal; font-size-adjust: none; font-stretch: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="font-size: 10pt;">gflags&nbsp;/i&nbsp;<em>ImageName</em>&nbsp;-ust</span></h1>  </div><p>List of Tools and Documentation</p><p>Microsoft Debugging Tools for Windows includes a number of debuggers and other tools. Some of them are described in this documentation, and others are described elsewhere. The following list briefly describes each tool and where its documentation can be found.</p><h4>Debuggers</h4><p>Debugging Tools for Windows includes the following debuggers. These are described throughout this documentation, and are referred to by their individual names or collectively as "the debugger":</p><dl><dt>WinDbg  (Windbg.exe)</dt><dd><p>A user-mode and kernel-mode debugger with a graphical interface.</p></dd><dt>KD  (Kd.exe)</dt><dd><p>A kernel-mode debugger with a console interface.</p></dd><dt>CDB  (Cdb.exe)</dt><dd><p>A user-mode debugger with a console interface.</p></dd><dt>NTSD  (Ntsd.exe)</dt><dd><p>A user-mode debugger with a console interface. CDB and NTSD are virtually identical. In this documentation, whenever a reference is made to "CDB", it applies to both CDB and NTSD. When these two debuggers differ, it is noted. (See <a href="http://msdn.microsoft.com/en-us/library/ff539051.aspx">CDB</a> and NTSD for details.)</p></dd></dl><h4>Additional Tools and Utilities</h4><p>Debugging Tools for Windows also includes the following tools and utilities:</p><dl><dt>Logger  (Logger.exe and Logexts.dll)</dt><dd><p>A tool and an extension DLL that record the function calls and other actions of a program. Logger is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff552060.aspx">Logger and LogViewer</a>.</p></dd><dt>LogViewer  (Logviewer.exe)</dt><dd><p>A tool that displays the logs created by Logger.  LogViewer is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff552060.aspx">Logger and LogViewer</a>.</p></dd><dt>ADPlus  (Autodump+, Adplus.vbs)</dt><dd><p>A console-based Microsoft Visual Basic script that can automatically create memory dump files and log files with debug output from one or more processes. ADPlus is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff537953.aspx">ADPlus</a>.</p></dd><dt>DbgRpc  (Dbgrpc.exe)</dt><dd><p>A tool used to display Microsoft Remote Procedure Call (RPC) state information.  DbgRpc is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff554617.aspx">RPC Debugging</a> and <a href="http://msdn.microsoft.com/en-us/library/ff560165.aspx">Using the DbgRpc Tool</a>.</p></dd><dt>KDbgCtrl  (Kernel Debugging Control, Kdbgctrl.exe)</dt><dd><p>A tool that controls and configures the kernel debugging connection.  KDbgCtrl is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff560118.aspx">Using KDbgCtrl</a>.</p></dd><dt>SrcSrv  (Srcsrv.dll)</dt><dd><p>A source server that can be used to deliver source files while debugging.  SrcSrv is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff558791.aspx">SrcSrv</a>. </p></dd><dt>SymSrv  (Symsrv.dll)</dt><dd><p>A symbol server that the debugger can use to connect to a symbol store.  SymSrv is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff558847.aspx">SymSrv</a>.</p></dd><dt>SymStore  (Symstore.exe)</dt><dd><p>A tool used to create a symbol store.  SymSrv is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff558848.aspx">Using SymStore</a>.</p></dd><dt>SymProxy</dt><dd><p>A tool used to create a single HTTP symbol server on your network that all your debuggers can point to. This has the benefit of pointing to multiple symbol servers (both internal and external) with a single symbol path, handling all authentication, and increasing performance via symbol caching. SymProxy is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff558846.aspx">SymProxy</a>. </p></dd><dt>AgeStore  (Agestore.exe)</dt><dd><p>A tool that removes old entries in the downstream store of a symbol server or a source server. AgeStore is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff538002.aspx">AgeStore</a>.</p></dd><dt>DBH  (Dbh.exe)</dt><dd><p>A tool that displays information about the contents of a symbol file.  DBH is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff540437.aspx">DBH</a>.</p></dd><dt>PDBCopy  (Pdbcopy.exe)</dt><dd><p>A tool that removes private symbol information from a symbol file, and controls which public symbols are included in the file. PDBCopy is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff553365.aspx">PDBCopy</a>.</p></dd><dt>DumpChk  (Dump File Checking Utility, Dumpchk.exe)</dt><dd><p>A tool used to validate a memory dump file.  DumpChk is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff542776.aspx">DumpChk</a>.  </p></dd><dt>DbgSrv  (Dbgsrv.exe)</dt><dd><p>A process server used for remote debugging.  DbgSrv is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff553469.aspx">Process Servers (User Mode)</a>.</p></dd><dt>KdSrv  (Kdsrv.exe)</dt><dd><p>A KD connection server used for remote debugging.  KDSrv is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff551859.aspx">KD Connection Servers (Kernel Mode)</a>.</p></dd><dt>DbEngPrx  (Dbengprx.exe)</dt><dd><p>A repeater (small proxy server) used for remote debugging.  DbgSrv is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff554553.aspx">Repeaters</a>.</p></dd><dt>The Remote tool  (Remote.exe)</dt><dd><p>A remoting tool that can be used to remotely control any console program, including KD, CDB, and NTSD. The Remote tool is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff554458.aspx">Remote Tool</a> and <a href="http://msdn.microsoft.com/en-us/library/ff554408.aspx">Remote Debugging Through Remote.exe</a>.</p></dd><dt>GFlags  (Global Flags Editor, Gflags.exe)</dt><dd><p>A tool used to control registry keys and other settings.  GFlags is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff549557.aspx">GFlags</a>.</p></dd><dt>The Kill tool  (Kill.exe)</dt><dd><p>A tool used to terminate a process.  The Kill tool is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff551919.aspx">Kill Tool</a>.</p></dd><dt>The Breakin tool  (Breakin.exe)</dt><dd><p>A tool used to cause a user-mode break to occur in a process.  Breakin.exe is not described in this documentation.  Use the <strong>breakin /?</strong> command for help with this tool.</p></dd><dt>The List tool  (File List Utility, List.exe)</dt><dd><p>        List.exe is not described in this documentation.  Use the <strong>list /?</strong> command for help with this tool.  </p></dd><dt>TList  (Task List Viewer, Tlist.exe)</dt><dd><p>A tool used to list all running processes.  TList is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff558901.aspx">TList</a>.</p></dd><dt>RTList  (Remote Task List Viewer, Rtlist.exe)</dt><dd><p>A tool used to list running processes via a DbgSrv process server.  RTList is not described in this documentation.  Use the <strong>rtlist /?</strong> command for help with this tool. </p></dd><dt>UMDH  (User-Mode Dump Heap utility, Umdh.exe)</dt><dd><p>A tool used to analyze heap allocations.  UMDH is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff558947.aspx">UMDH</a>.</p></dd><dt>USBView  (Universal Serial Bus Viewer, Usbview.exe)</dt><dd><p>A tool used to display the USB devices connected to a computer.  USBView is described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff560019.aspx">USBView</a>.</p></dd></dl><p>If you perform a custom install of Debugging Tools for Windows and select the SDK feature and all of its subfeatures, the libraries, headers, and samples used to build debugger extensions will be installed.</p><h4>Documentation</h4><dl><dt>"Debugging Tools for Windows"  (Debugger.chm)</dt><dd><p>This is the documentation you are currently reading.  It is the central documentation for Debugging Tools for Windows.</p></dd><dt>"Debug Help Library"  (Dbghelp.chm)</dt><dd><p>This documentation describes the DbgHelp API and the ImageHlp API, and also explains how to create your own symbol server. This is installed when you peform a custom install of Debugging Tools for Windows and select the SDK feature and its subfeatures.</p></dd></dl><h4>Tools Outside the Debugging Tools for Windows Package</h4><p>The following related tools are not part of the Debugging Tools for Windows package:</p><dl><dt>Dr. Watson  (Drwtsn32.exe)</dt><dd><p>A tool used for automatically creating dump files and sending error reports to Microsoft Online Crash Analysis (OCA). Dr. Watson is partially described in this documentation; see <a href="http://msdn.microsoft.com/en-us/library/ff542753.aspx">Dr. Watson</a>.  The other features of Dr. Watson are described in the help file associated with Drwtsn32.exe.</p></dd><dt>Build utility  (Build.exe)</dt><dd><p>A compiler and linker used to build debugger extensions and other programs. The Build utility and its documentation can be found in the Windows Driver Kit, and in earlier versions of the Windows DDK. </p></dd><dt>BinPlace  (Binplace.exe)</dt><dd><p>A tool used to control symbol files for build products. BinPlace and its documentation can be found in the Windows Driver Kit, and in earlier versions of the Windows DDK. </p></dd><dt>Application Verifier  (AppVerif.exe and <strong>!avrf</strong>)</dt><dd><p>A tool used to test user-mode applications.  This tool consists of two components:  the AppVerif.exe utility and the <strong>!avrf</strong> extension command.  All the features of Application Verifier that are debugger-related are described in <a href="http://go.microsoft.com/fwlink/?linkid=108353" target="_blank">Application Verifier</a>.  The other features of Application Verifier are described in the help file associated with AppVerif.exe.</p></dd></dl><p>&nbsp;</p><p>&nbsp;</p>