<p>/*</p><p>http://www.newsmth.net/bbstcon.php?board=Algorithm&amp;gid=33809&nbsp;</p>发信人: firebugP (firefox), 信区: Algorithm<br />标 &nbsp;题: 一个老题<br />发信站: 水木社区 (Tue Nov &nbsp;3 00:50:48 2009), 站内<br /><br />将正整数n分为若干num个不同的正整数之和，给出所有可能的拆分结果（数字相同而顺序不同<br />的结果视为同一条结果，例如6=1+2+3和6=3+2+1是一回事，而6=2+4和6=1+5是符合条件<br />的结果）<br />*/<br /><br />#include &lt;stdio.h&gt;<br />#include &lt;set&gt;<br />#include &lt;vector&gt;<br />#include &lt;algorithm&gt;<br /><br />typedef std::set&lt;int&gt; Container;<br />Container res;<br />std::vector&lt;Container&gt; allRes;<br /><br />void printAll()<br />{<br />&nbsp;&nbsp; &nbsp;for(int i=0; i&lt;allRes.size(); i++)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;for(Container::iterator it=allRes[i].begin(), end=allRes[i].end(); <br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;it!=end; ++it)<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;printf("%d ", *it);<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;printf("\n");<br />&nbsp;&nbsp; &nbsp;}<br />}<br /><br />bool operator==(Container const &amp;a,Container const &amp;b)<br />{<br />&nbsp;&nbsp; &nbsp;if(a.size()!=b.size())<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return false;<br /><br />&nbsp;&nbsp; &nbsp;for(Container::const_iterator ita=a.begin(), enda=a.end(),itb=b.begin(); <br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ita!=enda; ++ita, ++itb)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if(*ita != *itb )return false;<br />&nbsp;&nbsp; &nbsp;}<br /><br />&nbsp;&nbsp; &nbsp;return true;<br />}<br /><br />void add()<br />{<br />&nbsp;&nbsp; &nbsp;if(allRes.end()!=std::find(allRes.begin(), allRes.end(),res))<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return;<br />&nbsp;&nbsp; &nbsp;allRes.push_back(res);<br />}<br /><br />//将正整数n分为num个不同的正整数之和<br />//将结果放到全局变量allRes中<br />void split(int n, int num)<br />{<br />&nbsp;&nbsp; &nbsp;if(num*(num+1)/2&gt;n) &nbsp; &nbsp;//无解<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return;<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;//只有一个数,结束<br />&nbsp;&nbsp; &nbsp;if(num==1)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;if(res.find(n)==res.end())<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;res.insert(n);<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;add();<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;res.erase(n);<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;return;<br />&nbsp;&nbsp; &nbsp;}<br /><br />&nbsp;&nbsp; &nbsp;//否则,遍历所有可能的<br />&nbsp;&nbsp; &nbsp;for(int i=1; i&lt;=n-(num-1)*num/2; i++)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;if(res.find(i)==res.end())<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;res.insert(i);<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//if(n-i&gt;=(num-1)*num/2)<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;split(n-i,num-1);<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;res.erase(i);<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;}<br />}<br /><br />void main()<br />{<br />&nbsp;&nbsp; &nbsp;split(16,3);<br />&nbsp;&nbsp; &nbsp;printAll();<br />}