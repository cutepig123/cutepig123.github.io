<div>#include &lt;stdio.h&gt;<br />#include &lt;math.h&gt;<br />#include &lt;assert.h&gt;<br /><br />double f(int x)<br />{<br />&nbsp;&nbsp; &nbsp;return 1.0/x;<br />}<br /><br />void Test1()<br />{<br />&nbsp;&nbsp; &nbsp;double a,b;<br />&nbsp;&nbsp; &nbsp;int i;<br />&nbsp;&nbsp; &nbsp;a=f(10);<br />&nbsp;&nbsp; &nbsp;b=f(10);<br />&nbsp;&nbsp; &nbsp;i = a==b;<br />&nbsp;&nbsp; &nbsp;printf("%d\n", i);<br />}<br /><br />void Test2()<br />{<br />&nbsp;&nbsp; &nbsp;double a,b,c;<br />&nbsp;&nbsp; &nbsp;int i;<br />&nbsp;&nbsp; &nbsp;a=f(10);<br />&nbsp;&nbsp; &nbsp;b=f(10);<br />&nbsp;&nbsp; &nbsp;c=f(10);<br />&nbsp;&nbsp; &nbsp;i = a==b;<br />&nbsp;&nbsp; &nbsp;printf("%d\n", i);<br />}<br /><br />template &lt;typename T&gt;<br />void PrintBin(T const &amp;t)<br />{<br />&nbsp;&nbsp; &nbsp;int n = sizeof(t)*8;<br />&nbsp;&nbsp; &nbsp;for(int i=n-1; i&gt;=0; i--)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;printf("%d", (t&gt;&gt;i)&amp;1);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(i%4==0) printf(" ");<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;printf("\n");<br />}<br /><br />void Test3()<br />{<br />&nbsp;&nbsp; &nbsp;float a = -625512485.15542145;<br />&nbsp;&nbsp; &nbsp;//unsigned char *u = (unsigned char *)&amp;a;<br />&nbsp;&nbsp; &nbsp;//printf("%x %x %x %x\n", u[0], u[1], u[2], u[3]);<br />&nbsp;&nbsp; &nbsp;printf("%.15g \n", a);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;unsigned int *n = (unsigned int *)&amp;a;&nbsp;&nbsp; &nbsp;//For double, MUST use&nbsp; long long<br />&nbsp;&nbsp; &nbsp;printf("%x \n", *n);<br />&nbsp;&nbsp; &nbsp;PrintBin(*n);<br />&nbsp;&nbsp; &nbsp;//PrintBin(a);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;int e = 8;<br />&nbsp;&nbsp; &nbsp;int m = 23;<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;if(sizeof(a)==sizeof(float))<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;e = 8;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;m = 23;<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;else<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;assert(sizeof(a)==sizeof(double));<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;e = 11;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;m = 52;<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;assert(1+e+m==sizeof(a)*8);;<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;int S = (*n) &gt;&gt; (e+m);<br />&nbsp;&nbsp; &nbsp;int Ep = ((*n) &lt;&lt; 1) &gt;&gt; (m+1);<br />&nbsp;&nbsp; &nbsp;int Mp = ((*n)&lt;&lt;(1+e))&gt;&gt;(1+e);<br />//&nbsp;&nbsp; &nbsp;printf("S %x Ep %x Mp %x \n", S, Ep, Mp);<br />&nbsp;&nbsp; &nbsp;printf("S&nbsp; ");<br />&nbsp;&nbsp; &nbsp;PrintBin(S);<br />&nbsp;&nbsp; &nbsp;printf("Ep&nbsp; ");<br />&nbsp;&nbsp; &nbsp;PrintBin(Ep);<br />&nbsp;&nbsp; &nbsp;printf("Mp&nbsp; ");<br />&nbsp;&nbsp; &nbsp;PrintBin(Mp);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;double E , M;<br />&nbsp;&nbsp; &nbsp;double r = 0;<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;if(Ep==0)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;E = 1.0-pow(2.0,e-1)+1;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;M = 1.0 * Mp / pow(2.0,m);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;else if(~Ep!=0)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;E = Ep-pow(2.0,e-1)+1;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;M = 1 + 1.0 * Mp / pow(2.0,m);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;//r = pow(-1.0, S) * pow(2.0, E) * M;<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;else<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// if(Mp==0)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// r = inf;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// else<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// r = nan;<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;assert(0);<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;printf("M&nbsp; ");<br />&nbsp;&nbsp; &nbsp;PrintBin(*(__int64*)&amp;M);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;r = pow(-1.0, S) * pow(2.0, E) * M;<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;printf("%.15g\n", r);<br />&nbsp;&nbsp; &nbsp;assert(fabs(r-a)&lt;1e-5);<br />}<br /><br />void main()<br />{<br />&nbsp;&nbsp; &nbsp;Test1();<br />&nbsp;&nbsp; &nbsp;Test2();<br />&nbsp;&nbsp; &nbsp;Test3();<br />}</div>