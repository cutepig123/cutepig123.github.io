# 目的

本文介紹怎樣玩esp8266

# 概述

esp8266有如下固件

* Arlandu固件，用c寫代碼
* nodemcu，用lua寫代碼

# nodemcu lua编程指南

## usb连接以及驱动安装

将esp8266通过usb2线连接到电脑

电脑安装CH340驱动，安装之后会在电脑的设备管理器有一个COM口出现

## 下载固件，以及flash到esp8266

![1657986662160](image/2022-07-16-esp8266/1657986662160.png)

## lua编程1：让板子上的灯闪烁

代码

```lua
-- 1.blink.lua
pin = 4 -- gpio pin
gpio.mode( pin, gpio.OUTPUT )
for i=1,100 do
    gpio.write( pin, gpio.LOW )
    tmr.delay( 500000 ) -- delay 0.5 second
    gpio.write( pin, gpio.HIGH )
    tmr.delay( 500000 ) -- delay 0.5 second
end
```

代码介绍。该灯连接到的是gpio4，代码首先设置该端口为输出端口（为什么要设置输入还是输出，好像跟电路相关，具体忘了那里讲过来着），然后代码

以上代码会hang住，因为他有个无限长的for loop。其实他还有一个timer的功能，这个是non blocking的

代码2：

```lua
pin = 4 -- gpio pin
gpio.mode( pin, gpio.OUTPUT )

value = gpio.LOW
local function blink()
    gpio.write( pin, value )

    if value == gpio.LOW then
        value = gpio.HIGH
    else
        value = gpio.LOW
    end
end

local function setuptimer(callback)
    local time1 = tmr.create() 
    time1:alarm(30, tmr.ALARM_AUTO, callback)
    return time1
end

setuptimer(blink)

```



led 測試

https://blog.csdn.net/tiandiren111/article/details/109040567

dht11

https://blog.csdn.net/CATTLE_L/article/details/91128601

# referece

## **nodemcu板子**

接口指南 https://zhuanlan.zhihu.com/p/477322369


## **Arduino固件**

https://zhuanlan.zhihu.com/p/477322369

dht11測量溫度

https://lights.ofweek.com/2020-10/ART-11000-2200-30463617.html

nodemcu 固件

https://ghostyguo.pixnet.net/blog/post/168300185-%E4%BD%BF%E7%94%A8-esplorer-%E6%92%B0%E5%AF%AB-nodemcu-%E7%A8%8B%E5%BC%8F

# ESP8266开发板NodeMCU 资料:

链接: https://pan.baidu.com/s/1n8gJToN1acbyyiwZ5Jvcsw 提取码: ni62
NodeMCU 烧录固件教程：https://www.cnblogs.com/0pen1/p/12592906.html

# DHT11温湿度教程

https://www.jianshu.com/p/3aba3ce1ad12

1.44 Arduino黑色+ESP8266黑色开发板：
http://www.lcdwiki.com/zh/1.44inch_SPI_Arduino_Module_Black_SKU:MAR1442 
这个是单独另外参考资料
学习资料免费链接: https://pan.baidu.com/s/1TRTU1f-35HpKSUEhKegHKQ  提取码: vttk 

# ESP826 6针OLED

ESP826 6针OLED：https://blog.csdn.net/weixin_45631738/article/details/105961924
4针OLED：
https://blog.csdn.net/weixin_42268054/article/details/104254955?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.channel_param&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.channel_param

ESP8266开发板OLED链接: https://pan.baidu.com/s/1fDAF_-fAYEO6jh0c-FaYqg 提取码: 4k2s 复
OLED烧录教程：https://blog.csdn.net/weixin_45611006/article/details/109399946（简单说可以提示手动安装这个库
只需要安装ssd1306和u8g2的库就可以，写程序只要调用就可以了）

# ESP8266开发板+SG90舵机教程

ESP8266开发板+SG90舵机教程：https://blog.csdn.net/weixin_42268054/article/details/104735122
舵机如果只有90度
Servo库的默认脉冲时间为544-2400 μs(即 servo.attach(Servo_pin,544,2400))，而实际需要的脉冲为500-2500 μs,因此我们改一下默认的attach()定义就好了。
因此将servo.attach(Servo_pin)改成servo.attach(Servo_pin,500,2500)就大功告成了。

OLED教程是倒数第2网盘

# esp8266玩法总结

。使用arduino  ide，参考教程，youtube https://youtu.be/29dfYc4Xldk
。nodemcu固件，使用ESPlorer程序，直接lua编程
。esphome固件，不用编程，直接用yaml配置和ha通信

# 通过 NodeMCU 使用 HC-SR04 进行距离测量 

https://www.instructables.com/Distance-Measurement-Using-HC-SR04-Via-NodeMCU/

https://blog.csdn.net/weixin_43031092/article/details/106899984

https://randomnerdtutorials.com/esp8266-nodemcu-hc-sr04-ultrasonic-arduino/

https://atceiling.blogspot.com/2017/03/arduino_28.html

https://github.com/loiphin/ESP8266/blob/master/hcsr04.lua

https://github.com/vsserafim/hcsr04-nodemcu/blob/master/hcsr04-simple.lua

https://blog.csdn.net/lzlxlzy/article/details/123614107

https://stackoverflow.com/questions/32428274/nodemcu-esp8266-hc-sr04-tmr-now-difference-is-incorrect

