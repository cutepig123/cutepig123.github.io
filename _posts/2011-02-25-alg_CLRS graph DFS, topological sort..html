<div class="cnblogs_code"><div><span style="color: #000000;">#include&nbsp;</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">stdio.h</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include&nbsp;</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">algorithm</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br />#include&nbsp;</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">map</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"><br /></span><span style="color: #008000;">//</span><span style="color: #008000;">&nbsp;DFS&nbsp;ref:&nbsp;CLRS&nbsp;$22.3&nbsp;&amp;&nbsp;22.4</span><span style="color: #008000;"><br /></span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;MAX_VERTEX&nbsp;&nbsp;&nbsp;&nbsp;10</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;G[MAX_VERTEX][MAX_VERTEX]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;{</span><span style="color: #800080;">0</span><span style="color: #000000;">};<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;nVertex&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;WHITE&nbsp;&nbsp;&nbsp;&nbsp;1</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;GRAY&nbsp;&nbsp;&nbsp;&nbsp;2</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;BLACK&nbsp;&nbsp;&nbsp;&nbsp;3</span><span style="color: #000000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;color[MAX_VERTEX]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;{</span><span style="color: #800080;">0</span><span style="color: #000000;">};<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;parent[MAX_VERTEX]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;{</span><span style="color: #800080;">0</span><span style="color: #000000;">};<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;time&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;d[MAX_VERTEX]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;{</span><span style="color: #800080;">0</span><span style="color: #000000;">};&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">start&nbsp;visit&nbsp;time&nbsp;for&nbsp;each&nbsp;vertex</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;f[MAX_VERTEX]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;{</span><span style="color: #800080;">0</span><span style="color: #000000;">};&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">end&nbsp;visit&nbsp;time&nbsp;for&nbsp;each&nbsp;vertex</span><span style="color: #008000;"><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;sequence[MAX_VERTEX</span><span style="color: #000000;">*</span><span style="color: #800080;">2</span><span style="color: #000000;">]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;{</span><span style="color: #800080;">0</span><span style="color: #000000;">};<br /><br /></span><span style="color: #0000ff;">#define</span><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(x,y)&nbsp;&nbsp;&nbsp;&nbsp;G[x-1][y-1]&nbsp;=&nbsp;1;</span><span style="color: #000000;"><br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;">&nbsp;DFS_VISIT(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;u)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;color[u]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;GRAY;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;sequence[time]</span><span style="color: #000000;">=</span><span style="color: #000000;">u;<br />&nbsp;&nbsp;&nbsp;&nbsp;d[u]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">++</span><span style="color: #000000;">time;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;v</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;&nbsp;v</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">nVertex;&nbsp;v</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(&nbsp;G[u][v]&nbsp;</span><span style="color: #000000;">&amp;&amp;</span><span style="color: #000000;">&nbsp;color[v]&nbsp;</span><span style="color: #000000;">==</span><span style="color: #000000;">&nbsp;WHITE&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent[v]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;u;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DFS_VISIT(v);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;color[u]</span><span style="color: #000000;">=</span><span style="color: #000000;">BLACK;<br />&nbsp;&nbsp;&nbsp;&nbsp;sequence[time]</span><span style="color: #000000;">=</span><span style="color: #000000;">u;<br />&nbsp;&nbsp;&nbsp;&nbsp;f[u]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">++</span><span style="color: #000000;">time;<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;">&nbsp;DFS()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;&nbsp;i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">nVertex;&nbsp;i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color[i]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;WHITE;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent[i]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">-</span><span style="color: #800080;">1</span><span style="color: #000000;">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">NIL</span><span style="color: #008000;"><br /></span><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;time&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">0</span><span style="color: #000000;">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;u</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;&nbsp;u</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">nVertex;&nbsp;u</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span style="color: #000000;">(&nbsp;color[u]</span><span style="color: #000000;">==</span><span style="color: #000000;">WHITE&nbsp;)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DFS_VISIT(u);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;">&nbsp;testDFS()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">2</span><span style="color: #000000;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">4</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">2</span><span style="color: #000000;">,</span><span style="color: #800080;">5</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">3</span><span style="color: #000000;">,</span><span style="color: #800080;">5</span><span style="color: #000000;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">3</span><span style="color: #000000;">,</span><span style="color: #800080;">6</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">4</span><span style="color: #000000;">,</span><span style="color: #800080;">2</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">5</span><span style="color: #000000;">,</span><span style="color: #800080;">4</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">6</span><span style="color: #000000;">,</span><span style="color: #800080;">6</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;nVertex&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">6</span><span style="color: #000000;">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;DFS();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">visiting&nbsp;sequence&nbsp;(image22-4&nbsp;in&nbsp;CLRS:)\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;&nbsp;i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">time;&nbsp;i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%c&nbsp;</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;sequence[i]</span><span style="color: #000000;">+</span><span style="color: #800000;">'</span><span style="color: #800000;">u</span><span style="color: #800000;">'</span><span style="color: #000000;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000ff;">void</span><span style="color: #000000;">&nbsp;testTopologicalSort()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">2</span><span style="color: #000000;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">1</span><span style="color: #000000;">,</span><span style="color: #800080;">8</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">2</span><span style="color: #000000;">,</span><span style="color: #800080;">3</span><span style="color: #000000;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">2</span><span style="color: #000000;">,</span><span style="color: #800080;">8</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">3</span><span style="color: #000000;">,</span><span style="color: #800080;">4</span><span style="color: #000000;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">3</span><span style="color: #000000;">,</span><span style="color: #800080;">6</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">4</span><span style="color: #000000;">,</span><span style="color: #800080;">5</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">5</span><span style="color: #000000;">,</span><span style="color: #800080;">6</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;ADD_EDGE(</span><span style="color: #800080;">7</span><span style="color: #000000;">,</span><span style="color: #800080;">8</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;nVertex&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;</span><span style="color: #800080;">6</span><span style="color: #000000;">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;DFS();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">char</span><span style="color: #000000;">&nbsp;</span><span style="color: #000000;">*</span><span style="color: #000000;">text[]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;{</span><span style="color: #800000;">"</span><span style="color: #800000;">undershot</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #800000;">"</span><span style="color: #800000;">pant</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #800000;">"</span><span style="color: #800000;">belt</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #800000;">"</span><span style="color: #800000;">shirt</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #800000;">"</span><span style="color: #800000;">tie</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #800000;">"</span><span style="color: #800000;">jacket</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #800000;">"</span><span style="color: #800000;">socks</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #800000;">"</span><span style="color: #800000;">shoes</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;</span><span style="color: #800000;">"</span><span style="color: #800000;">watch</span><span style="color: #800000;">"</span><span style="color: #000000;">};<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">visiting&nbsp;sequence&nbsp;(image22-7&nbsp;in&nbsp;CLRS:)\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;&nbsp;i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">time;&nbsp;i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%s&nbsp;</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;text[&nbsp;sequence[i]</span><span style="color: #000000;">%</span><span style="color: #000000;">nVertex&nbsp;]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">\nTopological&nbsp;sort&nbsp;result:\n</span><span style="color: #800000;">"</span><span style="color: #000000;">);<br />&nbsp;&nbsp;&nbsp;&nbsp;std::map</span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">int</span><span style="color: #000000;">,</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">&nbsp;m;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000;">//</span><span style="color: #008000;">reverse&nbsp;finish&nbsp;time&nbsp;-&gt;&nbsp;vertex&nbsp;id</span><span style="color: #008000;"><br /></span><span style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;i</span><span style="color: #000000;">=</span><span style="color: #800080;">0</span><span style="color: #000000;">;&nbsp;i</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">nVertex;&nbsp;i</span><span style="color: #000000;">++</span><span style="color: #000000;">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m[&nbsp;</span><span style="color: #000000;">-</span><span style="color: #000000;">f[i]&nbsp;]&nbsp;</span><span style="color: #000000;">=</span><span style="color: #000000;">&nbsp;i;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span style="color: #000000;">(std::map</span><span style="color: #000000;">&lt;</span><span style="color: #0000ff;">int</span><span style="color: #000000;">,</span><span style="color: #0000ff;">int</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">::iterator&nbsp;it</span><span style="color: #000000;">=</span><span style="color: #000000;">m.begin();&nbsp;it</span><span style="color: #000000;">!=</span><span style="color: #000000;">m.end();&nbsp;</span><span style="color: #000000;">++</span><span style="color: #000000;">it)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(</span><span style="color: #800000;">"</span><span style="color: #800000;">%s&nbsp;</span><span style="color: #800000;">"</span><span style="color: #000000;">,&nbsp;text[&nbsp;it</span><span style="color: #000000;">-&gt;</span><span style="color: #000000;">second</span><span style="color: #000000;">%</span><span style="color: #000000;">nVertex&nbsp;]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000ff;">int</span><span style="color: #000000;">&nbsp;main()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;testTopologicalSort();<br />}</span></div></div>