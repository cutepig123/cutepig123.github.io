---
categories: cpp
---
<div>#include &lt;stdio.h&gt;<br /><br />class RVO<br /><br />{<br /><br />public:<br /><br />&nbsp;&nbsp; &nbsp;RVO()<br /><br />&nbsp;&nbsp; &nbsp;{<br /><br />&nbsp;&nbsp; &nbsp;printf("I am in constructor %d\n", this);<br /><br />&nbsp;&nbsp; &nbsp;}<br /><br />&nbsp;&nbsp; &nbsp;RVO (const RVO&amp; c_RVO)<br /><br />&nbsp;&nbsp; &nbsp;{<br /><br />&nbsp;&nbsp; &nbsp;printf ("I am in copy constructor %d\n", this);<br /><br />&nbsp;&nbsp; &nbsp;}<br /><br />&nbsp;&nbsp; &nbsp;~RVO()<br /><br />&nbsp;&nbsp; &nbsp;{<br /><br />&nbsp;&nbsp; &nbsp;printf ("I am in destructor %d\n", this);<br /><br />&nbsp;&nbsp; &nbsp;}<br /><br />&nbsp;&nbsp; &nbsp;RVO&amp; operator=(const RVO&amp; rhs)<br /><br />&nbsp;&nbsp; &nbsp;{<br /><br />&nbsp;&nbsp; &nbsp;printf ("I am in operator %d = %d\n", this, &amp;rhs);<br /><br />&nbsp;&nbsp; &nbsp;return *this;<br /><br />&nbsp;&nbsp; &nbsp;}<br /><br />&nbsp;&nbsp; &nbsp;int mem_var;<br /><br />};<br /><br />RVO MyMethod (int i)<br /><br />{<br /><br />&nbsp;&nbsp; &nbsp;printf("3\n");<br /><br />&nbsp;&nbsp; &nbsp;RVO rvo; //I am in constructor 1244896<br /><br />&nbsp;&nbsp; &nbsp;printf("4\n");<br /><br />&nbsp;&nbsp; &nbsp;rvo.mem_var = i;<br /><br />&nbsp;&nbsp; &nbsp;printf("5\n");<br /><br />&nbsp;&nbsp; &nbsp;return (rvo); //1244948CC, ~1244896<br /><br />&nbsp;&nbsp; &nbsp;printf("6\n");<br /><br />}<br /><br />int main()<br /><br />{<br /><br />&nbsp;&nbsp; &nbsp;printf("1\n");<br /><br />&nbsp;&nbsp; &nbsp;RVO rvo; //I am in constructor 1245016<br /><br />&nbsp;&nbsp; &nbsp;printf("2\n");<br /><br />&nbsp;&nbsp; &nbsp;rvo=MyMethod(5); //I am in copy constructor<br /><br />&nbsp;&nbsp; &nbsp;printf("7\n");<br /><br />&nbsp;&nbsp; &nbsp;return 0; //~1245016<br /><br />}<br /><br /><br />RVO MyMethod (RVO&amp; hddenObj, int i)<br /><br />{<br /><br />&nbsp;&nbsp; &nbsp;printf("3\n");<br /><br />&nbsp;&nbsp; &nbsp;RVO rvo; <br />&nbsp;&nbsp; &nbsp;rvo.RVO();&nbsp;&nbsp; &nbsp;//I am in constructor 1244896<br /><br />&nbsp;&nbsp; &nbsp;printf("4\n");<br /><br />&nbsp;&nbsp; &nbsp;rvo.mem_var = i;<br /><br />&nbsp;&nbsp; &nbsp;printf("5\n");<br /><br />&nbsp;&nbsp; &nbsp;hddenObj.RVO(rvo);&nbsp;&nbsp; &nbsp;//I am in copy constructor<br />&nbsp;&nbsp; &nbsp;rvo.~RVO();&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;return ; //1244948CC, ~1244896<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;printf("6\n");<br /><br />}<br /><br />int main()<br /><br />{<br /><br />&nbsp;&nbsp; &nbsp;printf("1\n");<br /><br />&nbsp;&nbsp; &nbsp;RVO rvo; //I am in constructor 1245016<br /><br />&nbsp;&nbsp; &nbsp;printf("2\n");<br /><br />&nbsp;&nbsp; &nbsp;rvo=MyMethod(5); //I am in copy constructor<br /><br />&nbsp;&nbsp; &nbsp;printf("7\n");<br /><br />&nbsp;&nbsp; &nbsp;return 0; //~1245016<br /><br />}<br /><br />1<br />I am in constructor 1245016<br />2<br />3<br />I am in constructor 1244888<br />4<br />5<br />I am in copy constructor 1244944<br />I am in destructor 1244888<br />I am in operator 1245016 = 1244944<br />I am in destructor 1244944<br />7<br />I am in destructor 1245016</div>