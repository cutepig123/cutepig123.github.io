---
categories: cpp
---
<div>#include &lt;vector&gt;<br />#include &lt;assert.h&gt;<br /><br />struct Expression;<br /><br />struct Num<br />{<br />&nbsp;&nbsp; &nbsp;Num(size_t n, int i)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;data.resize(n, i);<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;Num&amp; operator=(Expression&amp; exp);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;void print() const<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for(size_t i=0; i&lt;data.size();i++)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;printf("%d ", data);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;printf("\n");<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;std::vector &lt;int&gt; data;<br />};<br /><br />struct Expression<br />{<br />&nbsp;&nbsp; &nbsp;Expression(Num const &amp; a,<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Num const &amp; b)<br />&nbsp;&nbsp; &nbsp; :a_(a), b_(b)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;assert(a_.data.size()==b_.data.size());<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;void apply(Num *p)<br />&nbsp;&nbsp; &nbsp;{<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;size_t n=a_.data.size();<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(p-&gt;data.size()!= n)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;p-&gt;data.resize(n);<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for(size_t i=0; i&lt;n;i++)<br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;p-&gt;data[i] = a_.data[i] + b_.data[i];<br />&nbsp;&nbsp; &nbsp;}<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;Num const &amp; a_;<br />&nbsp;&nbsp; &nbsp;Num const &amp; b_;<br />};<br /><br />Num&amp; Num::operator=(Expression&amp; exp)<br />{<br />&nbsp;&nbsp; &nbsp;exp.apply(this);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;return *this;<br />}<br /><br />Expression operator+(Num const &amp; a,Num const &amp; b)<br />{<br />&nbsp;&nbsp; &nbsp;return Expression(a,b);<br />}<br /><br />void main()<br />{<br />&nbsp;&nbsp; &nbsp;Num a(10, 1);<br />&nbsp;&nbsp; &nbsp;Num b(10, 10);<br />&nbsp;&nbsp; &nbsp;Num c(0, 0);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;c = Expression(a+b);<br />&nbsp;&nbsp; &nbsp;<br />&nbsp;&nbsp; &nbsp;c.print();<br />}<br /></div>